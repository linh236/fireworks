/*@license
  MIT License (MIT)

Copyright (c) 2016 Hung-I Chiu (noootown)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.*/
"use strict";!function(e,i){function t(){m===!0?(p.init(),m=!1):m=!0,I(t)}function o(){this.firework1s=[],this.firework2s=[],this.rocketOrNot=!0,this.curPos=new r(-1e3,0),this.time=0,this.$canvas,this.ctx,this.dot=0,this.DOTMAX=12e3,this.init=function(){this.time+=10/9*w,this.ctx.fillStyle="rgba(0,0,0,0.15)",this.ctx.beginPath(),this.ctx.fillRect(0,0,this.$canvas.width(),this.$canvas.height()),this.ctx.closePath();for(var e=0;e<this.firework1s.length;e++){var i=this.firework1s[e];if(i.update()&&i.rocketOrNot)i.draw();else{var t=new a({x:i.endPos.x,y:i.endPos.y,type:i.type,startTime:this.time});t.init(),this.firework2s.push(t),this.firework1s.splice(e,1),e--}}for(e=0;e<this.firework2s.length;e++)i=this.firework2s[e],i.checkFinish()?(this.dot-=P[i.type].NUM,this.firework2s.splice(e,1),e--):(i.update(),i.draw())},this.shoot=function(e,i,t){if(this.dot+P[e].NUM<=this.DOTMAX){this.dot+=P[e].NUM;var o=new s({x:i,y:t,type:e,rocketOrNot:this.rocketOrNot,startTime:this.time});this.firework1s.push(o)}}}function r(e,i){this.x=e,this.y=i,this.setVector=function(e,i){this.x=e,this.y=i}}function s(t){this.x=t.x||0,this.y=t.y||0,this.type=t.type||0,this.rocketOrNot=t.rocketOrNot||!0,this.time=t.time||30*(16*Math.random()+16)/w,this.startTime=t.startTime||0,this.color="#FFFFFF",this.startPos=new r(this.x,i(e).height()),this.endPos=new r(this.x,this.y),this.curPos=new r(this.startPos.x,this.startPos.y),this.velocity=new r((this.endPos.x-this.startPos.x)/this.time,(this.endPos.y-this.startPos.y)/this.time)}function a(e){this.x=e.x||0,this.y=e.y||0,this.type=e.type||0,this.startTime=e.startTime||0,this.fireworkPoints=[],this.startPos=new r(e.x,e.y),this.firstPoint=0}function l(e){this.x=e.x||0,this.y=e.y||0,this.velocity=e.velocity||0,this.angle=e.angle||0,this.color=e.color||"rgba(0,0,0,0)",this.radius=e.radius||0,this.timeMax=e.timeMax*T/30||0,this.delay=e.delay*T/30||0,this.acceler=void 0===e.acceler?5e-5:e.acceler,this.invisibleTime=e.invisibleTime*T/30||0,this.friction=e.friction||0,this.startPos=new r(this.x,this.y),this.curPos=new r(this.x,this.y),this.startSpeed=new r(this.velocity*Math.cos(this.angle),this.velocity*Math.sin(this.angle)),this.speed=new r(this.startSpeed.x,this.startSpeed.y),this.time=0,this.delayPtr=this.delay,this.invisibleTimePtr=this.invisibleTime,this.timeInterval=4/9*w}function h(e,i,t){var o,r,s,a,h=[],m=0,p=c(1),T=0,w=0,I=0,P=0;if(1==t)for(o=d(200)+200,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:p,radius:d(2),timeMax:d(400)+800,acceler:3e-4}));else if(2==t)for(p=c(2),o=200,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.3),angle:d(g),color:p,radius:d(2),timeMax:d(100)+200,acceler:3e-4}));else if(3==t){for(p=c(2),o=1500,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(1)>.3?d(.5)+.15:d(.5),angle:d(g),color:p,radius:d(2),timeMax:d(1e3)+600,acceler:3e-4}));for(o=500,p="rgb(255, 255, 255)",r=0;o>r;r++)a=d(300)+300,h.push(new l({x:e-500+d(1e3),y:i+100+d(600),color:"rgb(255, 255, 255)",radius:d(2),timeMax:1610+a,acceler:0,invisibleTime:1600+a}))}else if(4==t)for(p=c(2),o=720,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:.5,angle:g*r/o,color:p,radius:d(2),timeMax:d(200)+800,acceler:3e-4}));else if(5==t)for(p=c(2),o=720,r=0;8>r;r++)for(s=0;o/8>s;s++)h.push(new l({x:e,y:i,velocity:.5,angle:g*(r/8+(d(15)+15)/360),color:p,radius:d(2),timeMax:d(200)+800,acceler:3e-4}));else if(6==t){for(p=c(3,[142,234,342,298,204,116]),I=.13,o=5,r=0;6>r;r++){for(s=0;o>s;s++){m=u(s/o*360+d(15));for(var N=0;10>N;N++)h.push(new l({x:e,y:i,velocity:I+r/32-.015+d(.03)-N/15*.02,angle:m,color:p,radius:(-x(N-5)+5)/5*2,timeMax:d(200)+800,acceler:1e-4}))}o+=5}for(p=f(60),I=.04,o=4,r=0;6>r;r++){for(s=0;o>s;s++)for(m=u(s/o*360+d(30)),N=0;15>N;N++)h.push(new l({x:e,y:i,velocity:I+r/32-.015+d(.03)-N/15*.02,angle:m,color:p,radius:(-x(N-15)+15)/15*1,timeMax:d(200)+800,acceler:1e-4}));o+=3}}else if(7==t){var E=[60,62,64,90,128,146,240,300],b=E[Math.floor(d(E.length))];p=f(b);var U=!1;60!=b&&62!=b&&64!=b&&90!=b&&128!=b&&146!=b||(U=!0);var k=24+Math.floor(d(16)),F=1e-4;for(m=u(d(360)),r=0;k>r;r++)for(m+=u(360/k+d(5)),I=.3+d(.2),P=45e-5+d(1e-4),N=0;50>N;N++)h.push(new l({x:e,y:i,velocity:N/50*I,angle:m+u(d(2)),color:.05>N/100*I&&d(1)>.6&&U||(60==b||62==b||64==b)&&d(1)>.65?"rgb(255,255,255)":p,radius:(-x(N-25)+25)/25*2,timeMax:d(200)+400,acceler:F+2e-4*N/100}))}else if(8==t){var S;for(N=0;500>N;N++)S=d(200)+N/5,m=d(360),a=d(300)+300,h.push(new l({x:e+S*M(m),y:i+S*y(m),color:"rgb(255,255,255)",radius:d(2),timeMax:a+10,invisibleTime:a}))}else if(9==t)for(m=d(60),T=250+d(250),o=100,s=0;6>s;s++)for(p=c(2),T=350+d(350),r=0;o>r;r++)h.push(new l({x:e+100*M(m+60*s),y:i+100*y(m+60*s),velocity:d(.3),angle:d(g),color:p,radius:d(2),timeMax:d(100)+200,delay:T,acceler:3e-4}));else if(0==t)for(m=d(60),N=0;6>N;N++){p=c(2),T=400+d(200),o=0;var H=100+d(100);for(r=0;6>r;r++){for(s=0;o>s;s++)a=d(100)+300,h.push(new l({x:e+H*M(m+60*N),y:i+H*y(m+60*N),velocity:r/16-.03+d(.06),angle:u(s/o*360),color:p,radius:d(2),timeMax:d(100)+300,delay:T}));o+=8}}else if(10==t){var _=d(80)+300;for(p=f(_),T=0,N=0;90>N;N++)n(h,{x:e,y:i,velocity:.15*(v(.5-y(4*N)/2)+Math.pow(2.718281828,-10*x(4*N/360*g-.75*g)-1.8)),angle:u(-4*N),color:p,timeMax:d(100)+800});n(h,{x:e,y:i,velocity:.15*(v(.5-y(270)/2)+Math.pow(2.718281828,-10*x(.75*g-.75*g)-1.8)),angle:u(90),color:p,timeMax:d(100)+800})}else if(11==t){_=d(360),p=f(_);var $=d(6);for(N=0;60>N;N++)n(h,{x:e,y:i,velocity:.4+d(.02),angle:u(6*N+$),color:p,timeMax:d(100)+600,alpha:1})}else if(12==t)for(E=[0,40,60,75,90,105,120,240,270,300],_=E[Math.floor(d(E.length))],p=f(_),N=0;60>N;N++)n(h,{x:e,y:i,velocity:.5+d(.5),angle:u(d(360)),color:p,timeMax:d(200)+300,friction:.0025,alpha:1});else if(13==t){for(E=[0,40,60,90,120,180,210,225,230,235,240,242,243,244,245,270,300],_=E[Math.floor(d(E.length))],p=f(_),N=0;100>N;N++)n(h,{x:e,y:i,velocity:.5+d(.3),angle:d(g),color:p,timeMax:d(200)+300,friction:.0025,alpha:1});for(p="rgb(255,255,255)",N=0;100>N;N++)h.push(new l({x:e,y:i,velocity:.1+d(.4),angle:d(g),color:p,radius:3.1,timeMax:d(200)+300,friction:.0025}))}else if(14==t){_=d(360),p=f(_),_=_+90+d(60);var A=f(_);_=_+90+d(60);var O=f(_);for(o=d(200)+200,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:p,radius:d(2),timeMax:d(400)+800,acceler:3e-4}));for(r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:A,radius:d(2),timeMax:d(400)+800,acceler:3e-4}));for(r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:O,radius:d(2),timeMax:d(400)+800,acceler:3e-4}))}else if(15==t){for(_=d(360),p=f(_),_=_+90+d(60),A=f(_),_=_+90+d(60),O=f(_),o=d(200)+200,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:p,radius:d(2),timeMax:d(400)+400,acceler:3e-4}));for(r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:A,radius:d(2),timeMax:d(400)+400,acceler:3e-4}));for(r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:d(.5),angle:d(g),color:O,radius:d(2),timeMax:d(400)+400,acceler:3e-4}));for(p=c(2),o=0,N=0;6>N;N++){for(s=0;o>s;s++)n(h,{x:e,y:i,velocity:N/16-.03+d(.06),angle:d(g),color:p,radius:d(2),timeMax:d(400)+400,acceler:3e-4});o+=6}}else if(16==t){for(_=d(360),p=f(_),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/32-.015+d(.03),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(300)+700}));o+=30}for(p=f(_+90+d(60)),o=0,r=0;6>r;r++){for(s=0;o>s;s++)a=d(300)+500,h.push(new l({x:e,y:i,velocity:r/16-.03+d(.06),angle:u(s/o*360),color:p,radius:d(2),timeMax:d(200)+300+a,acceler:2e-4,invisibleTime:a}));o+=30}}else if(17==t){for(_=d(360),p=f(_),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/20-.024+d(.048),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+800,invisibleTime:300+d(300)}));o+=30}for(p=f(_+60+d(30)),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/32-.015+d(.03),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+400}));o+=15}for(o=300,p="rgb(255, 255, 255)",r=0;o>r;r++)H=d(100),j=d(360),a=550+d(300),h.push(new l({x:e+H*M(j),y:i+20+H*y(j),color:p,radius:d(2),timeMax:a+10,invisibleTime:a}));for(o=800,r=0;o>r;r++)H=d(150)+115,j=d(360),a=d(300)+900,h.push(new l({x:e+H*M(j),y:i+40+H*y(j),color:p,radius:d(2),timeMax:a+10,invisibleTime:a}));for(o=200,r=0;o>r;r++)H=d(115),j=d(360),a=d(300)+900,h.push(new l({x:e+H*M(j),y:i+20+H*y(j),color:p,radius:d(2),timeMax:a+10,invisibleTime:a}))}else if(18==t)for(S=0,p=c(2),N=0;60>N;N++){m=d(360),T=100+d(300),S+=N>=10?1.5:8;var q=e+S*M(m),R=i+S*y(m);h.push(new l({x:q,y:R,color:p,radius:3.75,timeMax:30,delay:T})),h.push(new l({x:q,y:R,color:"rgb(255,255,255)",radius:2,timeMax:60,delay:T}))}else if(19==t){for(E=[0,30,40,60,85,230,250,340],_=E[Math.floor(d(E.length)%E.length)],p=f(_),r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/32-.015+d(.03),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+800}));o+=24}for(o=720,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:6/32-d(.06),angle:u(r/o*360+d(5)),color:p,radius:d(1.5),timeMax:d(200)+800}));for(_=_+40+d(20),p=f(_),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/64-.0075+d(.015),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+800}));o+=24}for(o=720,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:6/64-d(.03),angle:u(r/o*360+d(5)),color:p,radius:d(1.5),timeMax:d(200)+800}))}else if(20==t){var C=d(360);for(p=f(C),I=.16/3,o=0,T=200,r=0;6>r;r++){for(s=0;o>s;s++)for(m=u(s/o*360-15+d(30)),N=0;20>N;N++)h.push(new l({x:e,y:i,velocity:.16/3+r/24-.02+d(.04)-N/20*.09,angle:m,color:p,radius:(-x(N-10)+10)/10*1.5,timeMax:d(200)+800,delay:200}));o+=5}for(C=C+d(60)+60,p=f(C),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/48-.01+d(.02),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+800,delay:200}));o+=10}for(C=C+d(60)+60,p=f(C),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/24-.02+d(.04),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+800,delay:200}));o+=8}for(o=600,r=0;o>r;r++)h.push(new l({x:e,y:i,velocity:.25-.04/3-d(.08),angle:u(r/o*360+d(5)),color:p,radius:d(1.5),timeMax:d(200)+800,delay:200}))}else if(21==t)for(p=c(2),o=0,r=0;6>r;r++){for(s=0;o>s;s++)for(m=u(s/o*360+d(15)),N=0;20>N;N++)H=d(115),$=d(360),h.push(new l({x:e+H*M($),y:i+H*y($),velocity:r/16-.03+d(.06)-N/20*.04,angle:m,color:p,radius:(-x(N-10)+10)/10,timeMax:d(200)+800,invisibleTime:d(200)}));o+=8}else if(22==t)for(_=d(360),p=f(_),_=_+90+d(60),A=f(_),_=_+90+d(60),O=f(_),o=0,r=0;6>r;r++){for(s=0;o>s;s++)I=r/32-.015+d(.03),a=d(200)+500,h.push(new l({x:e,y:i,velocity:I,angle:u(s/o*360),color:p,radius:d(2),timeMax:a})),h.push(new l({x:e,y:i,velocity:I,angle:u(s/o*360),color:A,radius:d(2),timeMax:a+500,invisibleTime:a})),h.push(new l({x:e,y:i,velocity:I,angle:u(s/o*360),color:O,radius:d(2),timeMax:a+1e3,invisibleTime:a+500}));o+=30}else if(23==t){C=d(360),p=f(C);var D=C+90+d(60),W=f(D),X=2;for(N=1;X>=N;N++){for(o=15*(N-1),r=0;6>r;r++){for(s=0;o>s;s++)a=d(200)+600,h.push(new l({x:e,y:i,velocity:r/32/X*N-.015/X*N+d(.03)/X*N,angle:u(s/o*360),color:p,radius:d(1.2),timeMax:a+200*N})),h.push(new l({x:e,y:i,velocity:r/32/X*N-.015/X*N+d(.03)/X*N,angle:u(s/o*360),color:W,radius:d(1.2),timeMax:a+200*N+400,invisibleTime:a+200*N}));o+=15}if(N==X)break;C=C+d(60)+90,p=f(C),D=D+d(60)+90,W=f(D)}for(S=0,p=f(C),N=0;30>N;N++){for(m=d(360),T=1600+d(200),S+=N>=10?1.5:8,q=e+S*M(m),R=i+100+S*y(m),H=1.75,r=0;20>r;r++)j=d(360),h.push(new l({x:q+H*M(j),y:R+H*y(j),color:p,radius:2,timeMax:10,delay:T}));h.push(new l({x:q,y:R,color:"rgb(255,255,255)",radius:2,timeMax:70,delay:T}))}for(S=100,p=f(D),N=0;30>N;N++){m=d(360),T=1600+d(200),S+=N>=10?1.5:8,q=e+S*M(m),R=i+100+S*y(m),H=3;var j;for(r=0;20>r;r++)j=d(360),h.push(new l({x:q+H*M(j),y:R+H*y(j),color:p,radius:2,timeMax:10,delay:T}));h.push(new l({x:q,y:R,color:"rgb(255,255,255)",radius:1.5,timeMax:70,delay:T}))}}else if(24==t)for(m=d(60),N=0;6>N;N++)for(p=c(2),T=200+d(200),o=0,H=50+d(100),r=0;6>r;r++){for(s=0;o>s;s++)w=d(100)+200,h.push(new l({x:e+H*M(m+60*N),y:i+H*y(m+60*N),velocity:r/16-.03+d(.06),angle:u(s/o*360),color:p,radius:d(2),timeMax:w+20+d(70),delay:T,invisibleTime:w}));o+=8}else if(25==t){m=d(60),X=3;for(var z=0;X>z;z++)for(N=0;6+2*z>N;N++)for(p=c(2),T=200+300*z,o=0,H=50+100*z+d(25),r=0;6>r;r++){for(s=0;o>s;s++)a=d(100)+300,h.push(new l({x:e+H*M(m+360/(6+2*z)*N),y:i+H*y(m+360/(6+2*z)*N),velocity:r/16-.03+d(.06),angle:u(s/o*360),color:p,radius:d(2),timeMax:a,delay:T}));o+=8}}else if(26==t)for(p=c(2),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/8-.06+d(.12),angle:u(s/o*360),color:p,radius:d(1.5),timeMax:d(200)+2e3,acceler:3e-4,friction:5e-5}));o+=30}else if(27==t){for(p=c(2),o=0,r=0;6>r;r++){for(s=0;o>s;s++)h.push(new l({x:e,y:i,velocity:r/16-.03+d(.06),angle:u(s/o*360),color:p,radius:d(2),timeMax:d(100)+250}));o+=30}for(r=0;36>r;r++)for(a=d(200)+800,s=0;10>s;s++)h.push(new l({x:e,y:i,velocity:.3+d(.02),angle:u(10*r-1+d(2)),color:p,radius:d(2),timeMax:a,invisibleTime:240}))}else if(28==t)for(N=0;60>N;N++)_=d(360),p=f(_),m=u(d(360)),T=d(200),w=d(200),a=w+200,I=.4+d(.2),P=.0025,n(h,{x:e,y:i,velocity:.4+d(.2),angle:u(d(360)),color:p,timeMax:w+200,delay:d(200),invisibleTime:w,friction:.0025});else if(29==t)for(o=360,r=0;6>r;r++)for(s=0;o/6>s;s++)h.push(new l({x:e,y:i,velocity:r/24+d(.02),angle:g*s/(o/6),color:p,radius:d(2),timeMax:d(200)+800}));else if(30==t)for(E=[60,62,64,90,128,146,240,300],b=E[Math.floor(d(E.length))],p=f(b),k=6+Math.floor(d(4)),F=1e-4,m=u(d(360)),r=0;k>r;r++)for(m+=u(360/k-5+d(10)),I=.5+d(.2),P=6e-4+d(1e-4),N=0;100>N;N++)h.push(new l({x:e,y:i,velocity:N/100*I,angle:m-u(d(5)),color:(60==b||62==b||64==b)&&d(1)>.65?"rgb(255,255,255)":p,radius:(-x(N-50)+50)/50*2,timeMax:d(200)+N/100*700,acceler:F+6e-4*N/100,friction:P}));else if(31==t)for(E=[0,40,60,90,120,210,240,270,300],_=E[Math.floor(d(E.length))],p=f(_),s=1;3>=s;s++)for(N=0;45>N;N++)n(h,{x:e,y:i,velocity:.13*s+d(.05)+.1,angle:u(8*N),color:p,timeMax:d(100)+200*s,invisibleTime:d(100)+200*(s-1)});else if(32==t)for(p=c(2),o=0,r=0;6>r;r++){for(s=0;o>s;s++)a=d(400)+2e3,h.push(new l({x:e,y:i,velocity:r/8-.06+d(.12),angle:u(s/o*360),color:p,radius:d(2),timeMax:a,acceler:3e-4,friction:.001})),h.push(new l({x:e-500+d(1e3),y:i+100+d(600),color:"rgb(255,255,255)",radius:d(2),timeMax:a+30,acceler:0,invisibleTime:a+20}));o+=60}else if(33==t)for(p=c(2),o=0,T=0,N=0;6>N;N++){for(s=0;o>s;s++)n(h,{x:e,y:i,velocity:N/16-.03+d(.06),angle:d(g),color:p,timeMax:d(100)+400});o+=6}else if(34==t)for(o=0,r=0;6>r;r++){for(s=0;o>s;s++)for(m=u(s/o*360+d(15)),N=0;10>N;N++)h.push(new l({x:e,y:i,velocity:r/24+d(.01)-N/40*.08,angle:m,color:p,radius:(-x(N-5)+5)/5*2,timeMax:d(200)+800,acceler:1e-4}));o+=8}else if(35==t){for(_=d(360),p=f(_),T=0,N=0;60>N;N++)n(h,{x:e,y:i,velocity:.2,angle:u(6*N),color:p,timeMax:d(200)+800,alpha:.8});for($=-10+d(30),N=0;20>N;N++)n(h,{x:e,y:i,velocity:.1,angle:u(30+$+6*N),color:p,timeMax:d(200)+800,alpha:.8});for(z=0;2>z;z++)for(N=0;10>N;N++)n(h,{x:e,y:i,velocity:.04+.07*N/10,angle:u(-60+$-60*z),color:p,timeMax:d(200)+800,alpha:.8});for(s=0;2>s;s++)for(N=0;11>N;N++)n(h,{x:e,y:i,velocity:.11*M(30)/M(30-4*N),angle:u(0===s?-60+$+4*N:-120+$-4*N),color:p,timeMax:d(200)+800,alpha:.8})}return h}function n(e,i){e.push(new l({x:i.x||0,y:i.y||0,velocity:i.velocity||0,angle:i.angle||0,color:"rgb(0,0,0)",radius:3,timeMax:i.timeMax-20||0,delay:i.delay+10||10,acceler:void 0===i.acceler?5e-5:i.acceler,invisibleTime:i.invisibleTime||0,friction:i.friction||0})),e.push(new l({x:i.x||0,y:i.y||0,velocity:i.velocity||0,angle:i.angle||0,color:i.color||"rgba(255,255,255,0.7)",radius:3.1,timeMax:i.timeMax||0,delay:i.delay||0,acceler:void 0===i.acceler?5e-5:i.acceler,invisibleTime:i.invisibleTime||0,friction:i.friction||0})),e.push(new l({x:i.x||0,y:i.y||0,velocity:i.velocity||0,angle:i.angle||0,color:void 0===i.alpha?"rgba(255,255,255,0.7)":"rgba(255,255,255,"+i.alpha+")",radius:2,timeMax:i.timeMax||0,delay:i.delay||0,acceler:void 0===i.acceler?5e-5:i.acceler,invisibleTime:i.invisibleTime||0,friction:i.friction||0}))}function c(e,i){var t,o=!0;if(0==e)t=d(360);else if(1==e)for(;o;)if(t=d(360),t>156&&202>t){if(d(50)>49)break}else if(t>258&&328>t){if(d(50)>49)break}else if(t>60&&360>t){if(d(15)>14)break}else{if(t>54)break;if(t>40){if(d(8)>7)break}else if(d(8)>7)break}else if(2==e)for(;o;)if(t=d(360),t>156&&202>t){if(d(20)>19)break}else{if(!(t>258&&300>t))break;if(d(20)>19)break}else if(3==e){var r=i.length;t=i[Math.floor(d(r))]}return f(t)}function f(e){var i=.7,t=1,o=t*i,r=t-o,s=o-x(e/60%2-1),a=(e-e%60)/60%6,l=Math.floor(255*(o+r)),h=Math.floor(255*(s+r)),n=Math.floor(255*r);return 0==a?"rgb("+l+","+h+","+n+")":1==a?"rgb("+h+","+l+","+n+")":2==a?"rgb("+n+","+l+","+h+")":3==a?"rgb("+n+","+h+","+l+")":4==a?"rgb("+h+","+n+","+l+")":5==a?"rgb("+l+","+n+","+h+")":void 0}function M(e){return Math.cos(2*Math.PI*e/360)}function y(e){return Math.sin(2*Math.PI*e/360)}function x(e){return Math.abs(e)}function u(e){return 2*Math.PI*e/360}function d(e){return Math.random()*e}function v(e){return Math.sqrt(e)}var m,p=new o,T=30,w=30;i.fn.firework=function(o){i(this).attr("height",void 0===o.height?i(e).height():o.height),i(this).attr("width",void 0===o.width?i(e).width():o.width),w=void 0!==o.speed&&o.speed>=10&&o.speed<=60?o.speed:30,T=void 0!==o.time&&o.time>=10&&o.time<=60?o.time:30,p.$canvas=i(this),p.ctx=i(this).get(0).getContext("2d"),s.prototype.ctx=p.ctx,a.prototype.ctx=p.ctx,l.prototype.ctx=p.ctx,t(),void 0!==o.period&&o.period>0?(o.fire.forEach(function(e){setTimeout(function(){p.shoot(36===e[1]?Math.floor(36*Math.random()):e[1],void 0===e[2]?(.8*Math.random()+.1)*p.$canvas.attr("width"):e[2],void 0===e[3]?(.65*Math.random()+.1)*p.$canvas.attr("height"):e[3])},e[0])}),setInterval(function(){o.fire.forEach(function(e){setTimeout(function(){p.shoot(36===e[1]?Math.floor(36*Math.random()):e[1],void 0===e[2]?(.8*Math.random()+.1)*p.$canvas.attr("width"):e[2],void 0===e[3]?(.65*Math.random()+.1)*p.$canvas.attr("height"):e[3])},e[0])})},o.period)):void 0!==o.firework&&o.fire.forEach(function(e){setTimeout(function(){p.shoot(36===e[1]?Math.floor(36*Math.random()):e[1],void 0===e[2]?(.8*Math.random()+.1)*p.$canvas.attr("width"):e[2],void 0===e[3]?(.65*Math.random()+.1)*p.$canvas.attr("height"):e[3])},e[0])})},i.fn.setCanvas=function(t){void 0===t?(i(this).attr("height",i(e).height()),i(this).attr("width",i(e).width())):(i(this).attr("height",void 0===t.height?i(e).height():t.height),i(this).attr("width",void 0===t.width?i(e).width():t.width))},i.fn.shoot=function(e){p.shoot(36===e[0]?Math.floor(36*Math.random()):e[0],void 0===e[1]?(.8*Math.random()+.1)*p.$canvas.attr("width"):e[1],void 0===e[2]?(.65*Math.random()+.1)*p.$canvas.attr("height"):e[2])};var I=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(i){e.setTimeout(i,1e3/60)}}();s.prototype.update=function(){return this.curPos.y>this.endPos.y?(this.curPos.x+=this.velocity.x,this.curPos.y+=this.velocity.y,!0):!1},s.prototype.draw=function(){this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(this.curPos.x,this.curPos.y),this.ctx.lineTo(this.curPos.x-.8*this.velocity.x,this.curPos.y-.8*this.velocity.y),this.ctx.stroke(),this.ctx.closePath(),this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.strokeStyle="#FFE0A4",this.ctx.moveTo(this.curPos.x-.8*this.velocity.x,this.curPos.y-.8*this.velocity.y),this.ctx.lineTo(this.curPos.x-2*this.velocity.x,this.curPos.y-2*this.velocity.y),this.ctx.stroke(),this.ctx.closePath(),this.ctx.lineWidth=1,this.ctx.beginPath();for(var e=0;5>e;e++)this.ctx.strokeStyle="#CE7A38",this.ctx.moveTo(this.curPos.x-(2+.4*e)*this.velocity.x,this.curPos.y-(2+.4*e)*this.velocity.y),this.ctx.lineTo(this.curPos.x-(2.2+.4*e)*this.velocity.x,this.curPos.y-(2.2+.4*e)*this.velocity.y);this.ctx.stroke(),this.ctx.closePath()},s.prototype.ctx=null,s.prototype.reset=function(){this.curPos=new r(this.startPos.x,this.startPos.y)},a.prototype.ctx=null,a.prototype.init=function(){for(var e=h(this.startPos.x,this.startPos.y,this.type,this.ctx),i=e[0].color,t=!0;1==t;){i=e[0].color;for(var o=0;o<e.length;o++)e[o].color==i&&(this.fireworkPoints.push(e[o]),e.splice(o,1),o--);if(0==e.length)break}var r=this.fireworkPoints;for(o=0;o<this.fireworkPoints.length&&!(r[o].delay+r[o].invisibleTime<r[this.firstPoint].delay+r[this.firstPoint].invisibleTime&&(this.firstPoint=o,r[o].delay+r[o].invisibleTime===0));o++);},a.prototype.checkStart=function(){return!!(this.fireworkPoints[0]&&this.fireworkPoints[this.firstPoint].delayPtr<=0&&this.fireworkPoints[this.firstPoint].invisibleTimePtr<=0)},a.prototype.checkDark=function(){return!!(this.fireworkPoints[0]&&this.fireworkPoints[0].time>=P[this.type].TIME+50)},a.prototype.checkFinish=function(){return P[this.type].FINISH_TIME&&this.fireworkPoints[0]&&this.fireworkPoints[0].time>=P[this.type].FINISH_TIME+100?!0:!!(!P[this.type].FINISH_TIME&&this.fireworkPoints[0]&&this.fireworkPoints[0].time>=P[this.type].TIME+100)},a.prototype.update=function(){for(var e=0;e<this.fireworkPoints.length;e++)this.fireworkPoints[e].update()},a.prototype.draw=function(){this.ctx.beginPath(),this.ctx.fillStyle="#000000";for(var e=0,i=0;i<this.fireworkPoints.length;i++)this.fireworkPoints[i].drawable()&&("#000000"==this.ctx.fillStyle?(this.ctx.fillStyle=this.fireworkPoints[i].color,e=i):this.fireworkPoints[i].color!==this.fireworkPoints[e].color&&(this.ctx.fill(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.fillStyle=this.fireworkPoints[i].color,e=i),this.fireworkPoints[i].draw());this.ctx.fill(),this.ctx.closePath()},a.prototype.reset=function(){for(var e=0;e<this.fireworkPoints.length;e++){var i=this.fireworkPoints[e];i.time=0,i.delayPtr=i.delay,i.curPos.x=i.startPos.x,i.curPos.y=i.startPos.y,i.speed.x=i.startSpeed.x,i.speed.y=i.startSpeed.y,i.invisibleTimePtr=i.invisibleTime}},l.prototype.ctx=null,l.prototype.update=function(){this.delayPtr>0?this.delayPtr-=this.timeInterval:(this.curPos.x=this.curPos.x+this.speed.x*this.timeInterval,this.curPos.y=this.curPos.y+this.speed.y*this.timeInterval,this.time+=this.timeInterval,this.speed.x>0&&this.speed.x<this.friction*this.speed.x*this.timeInterval||this.speed.x<0&&this.speed.x>this.friction*this.speed.x*this.timeInterval||0==this.speed.x?this.speed.x=0:this.speed.x-=this.friction*this.speed.x*this.timeInterval,this.friction*this.speed.y<2*this.acceler&&(this.speed.y=this.speed.y-this.friction*this.speed.y*10+2*this.acceler*this.timeInterval),this.invisibleTimePtr>0&&(this.invisibleTimePtr-=this.timeInterval))},l.prototype.draw=function(){this.ctx.moveTo(this.curPos.x,this.curPos.y),this.ctx.arc(this.curPos.x,this.curPos.y,this.radius,0,2*Math.PI,!0)},l.prototype.drawable=function(){return!(this.time>=this.timeMax||this.delayPtr>0||this.invisibleTimePtr>0)};var g=2*Math.PI,P={0:{TIME:550,NUM:864},1:{TIME:1200,NUM:400},2:{TIME:300,NUM:200},3:{FINISH_TIME:2300,TIME:1600,NUM:1500},4:{TIME:1e3,NUM:720},5:{TIME:1e3,NUM:720},6:{TIME:1e3,NUM:1710},7:{TIME:600,NUM:1600},8:{FINISH_TIME:600,TIME:-100,NUM:0},9:{TIME:300,NUM:600},10:{TIME:900,NUM:273},11:{TIME:700,NUM:180},12:{TIME:500,NUM:180},13:{TIME:500,NUM:400},14:{TIME:1200,NUM:900},15:{TIME:800,NUM:1170},16:{FINISH_TIME:1300,TIME:600,NUM:540},17:{FINISH_TIME:1200,TIME:750,NUM:540},18:{FINISH_TIME:400,TIME:-100,NUM:0},19:{TIME:1e3,NUM:1584},20:{TIME:1e3,NUM:1662},21:{FINISH_TIME:1e3,TIME:-100,NUM:1440},22:{FINISH_TIME:1700,TIME:1100,NUM:540},23:{FINISH_TIME:1700,TIME:1e3,NUM:1500},24:{TIME:400,NUM:864},25:{FINISH_TIME:1200,TIME:1e3,NUM:864},26:{FINISH_TIME:2200,TIME:1200,NUM:270},27:{TIME:1e3,NUM:360},28:{FINISH_TIME:400,TIME:-100,NUM:180},29:{TIME:1e3,NUM:360},30:{TIME:700,NUM:800},31:{TIME:700,NUM:405},32:{FINISH_TIME:2400,TIME:1200,NUM:1080},33:{TIME:500,NUM:162},34:{TIME:1e3,NUM:720},35:{TIME:1e3,NUM:366},48:{TIME:1e3,NUM:1080},49:{TIME:1e3,NUM:615},50:{TIME:1e3,NUM:810},51:{TIME:1e3,NUM:690},52:{TIME:1e3,NUM:1110},53:{TIME:1e3,NUM:645},54:{TIME:1e3,NUM:660},55:{TIME:1e3,NUM:600},56:{TIME:1e3,NUM:1260},97:{TIME:1e3,NUM:660},98:{TIME:1e3,NUM:690},99:{TIME:1e3,NUM:900},100:{TIME:1e3,NUM:690},101:{TIME:1e3,NUM:1260},102:{TIME:1e3,NUM:1230},103:{TIME:1e3,NUM:1545},104:{TIME:1e3,NUM:750},105:{TIME:1e3,NUM:570},106:{TIME:1e3,NUM:1020},107:{TIME:1e3,NUM:720},108:{TIME:1e3,NUM:420},109:{TIME:1e3,NUM:1587},110:{TIME:1e3,NUM:855},111:{TIME:1e3,NUM:1080},112:{TIME:1e3,NUM:1410},113:{TIME:1e3,NUM:1410},114:{TIME:1e3,NUM:735},115:{TIME:1e3,NUM:1290},116:{TIME:1e3,NUM:1170},117:{TIME:1e3,NUM:558},118:{TIME:1e3,NUM:600},119:{TIME:1e3,NUM:840},120:{TIME:1e3,NUM:600},121:{TIME:1e3,NUM:450},122:{TIME:1e3,NUM:720}}}(window,window.jQuery);